set Locker i3lock && sleep 1

exec --no-startup-id setxkbmap gb extd
exec_always --no-startup-id $HOME/.config/polybar/launch.sh

set background  #263238
set foreground  #eceff1
set cursor      #b3bfc7
set color0      #263238
set color8      #37474f
set color1      #ff9800
set color9      #ffa74d
set color2      #8bc34a
set color10     #9ccc65
set color3      #ffc107
set color11     #ffa000
set color4      #03a9f4
set color12     #81d4fa
set color5      #f4246b
set color13     #ef4981
set color6      #009688
set color14     #26a69a
set color7      #cfd8dc
set color15     #eceff1

#set foreground   #ffffff
#set background   #000000
#set cursorColor  #ffffff
#set color0       #333333
#set color8       #3d3d3d
#set color1       #8c4665
#set color9       #bf4d80
#set color2       #287373
#set color10      #53a6a6
#set color3       #7c7c99
#set color11      #9e9ecb
#set color4       #395573
#set color12      #477ab3
#set color5       #5e468c
#set color13      #7e62b3
#set color6       #31658c
#set color14      #6096bf
#set color7       #899ca1
#set color15      #c0c0c0

set $FOCUS #18A4DB
set $UNFOCUS #127196
set $BORDERF #00c3FF
set $BORDERU #00245E

set $float exec --no-startup-id ~/.config/shadow_work_around.sh, floating toggle

#WALLPAPER

# This file has been auto-generated by i3-config-wizard(1).
# It will not be overwritten, so edit it as you like.
#
# Should you change your keyboard layout some time, delete
# this file and re-run i3-config-wizard(1).
#

# i3 config file (v4)
#
# Please see http://i3wm.org/docs/userguide.html for a complete reference!

set $mod Mod4

for_window [class="^Evince$"] floating enable
for_window [class="^POPUP$"] floating enable
# Font for window titles. Will also be used by the bar unless a different font
# is used in the bar {} block below.
# font pango:Tewi Regular 8
#font pango:FontAwesome 9, Gohu GohuFont 9
font pango:Gohu GohuFont, Wuncon Siji 8

# Before i3 v4.8, we used to recommend this one as the default:
# font -misc-fixed-medium-r-normal--13-120-75-75-C-70-iso10646-1
# The font above is very space-efficient, that is, it looks good, sharp and
# clear in small sizes. However, its unicode glyph coverage is limited, the old
# X core fonts rendering does not support right-to-left and this being a bitmap
# font, it doesn’t scale on retina/hidpi displays.

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

for_window [class="^Skype$"] floating enable
for_window [class="^Evince$"] floating enable

#Wallpaper
#exec --no-startup-id feh --bg-fill --no-xinerama /home/mbell/Pictures/Wallpapers/earth-view/google-earth-view-6216.jpg
exec --no-startup-id feh --bg-fill --no-xinerama /home/mbell/Pictures/Wallpapers/sea.jpg

#Compton
exec --no-startup-id compton -o 0.3 --backend glx --vsync opengl -b -i 1.0 --config ~/.config/compton.conf

# borders
#for_window [class="^.*"] border pixel 0
for_window [class="^.*"] border pixel 2
#new_window pixel 3
#new_float pixel 3

# start a terminal
bindsym $mod+Return exec urxvt -geometry 100x30
# scratchpad
for_window [instance="__scratchpad"] move scratchpad 
for_window [instance="__scratchpad"] floating enable
exec --no-startup-id urxvt -name __scratchpad -geometry 50x20 -e zsh -c $HOME/scripts/scratchpad.sh
bindsym $mod+F2 scratchpad show

# kill focused window
bindsym $mod+Shift+q kill

bindsym $mod+y fullscreen disable; floating enable; resize set 320 180; sticky enable; move window to position 1016 558

# Menu
bindsym $mod+d exec rofi -show drun

# change focus
bindsym $mod+j focus left
bindsym $mod+k focus down
bindsym $mod+l focus up
bindsym $mod+semicolon focus right

# alternatively, you can use the cursor keys:
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# move focused window
bindsym $mod+Shift+j move left
bindsym $mod+Shift+k move down
bindsym $mod+Shift+l move up
bindsym $mod+Shift+semicolon move right

# alternatively, you can use the cursor keys:
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# split in horizontal orientation
bindsym $mod+h split h

# split in vertical orientation
bindsym $mod+v split v

# enter fullscreen mode for the focused container
bindsym $mod+f fullscreen toggle

# change container layout (stacked, tabbed, toggle split)
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle

# focus the parent container
bindsym $mod+a focus parent

# focus the child container
#bindsym $mod+d focus child

# switch to workspace
bindsym $mod+1 workspace 1
bindsym $mod+2 workspace 2
bindsym $mod+3 workspace 3
bindsym $mod+4 workspace 4
bindsym $mod+5 workspace 5
bindsym $mod+6 workspace 6
bindsym $mod+7 workspace 7
bindsym $mod+8 workspace 8
bindsym $mod+9 workspace 9
bindsym $mod+0 workspace 10

# move focused container to workspace
bindsym $mod+Shift+1 move container to workspace 1
bindsym $mod+Shift+2 move container to workspace 2
bindsym $mod+Shift+3 move container to workspace 3
bindsym $mod+Shift+4 move container to workspace 4
bindsym $mod+Shift+5 move container to workspace 5
bindsym $mod+Shift+6 move container to workspace 6
bindsym $mod+Shift+7 move container to workspace 7
bindsym $mod+Shift+8 move container to workspace 8
bindsym $mod+Shift+9 move container to workspace 9
bindsym $mod+Shift+0 move container to workspace 10

# reload the configuration file
bindsym $mod+Shift+c reload
# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $mod+Shift+r restart
# exit i3 (logs you out of your X session)
bindsym $mod+Shift+e exec "i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -b 'Yes, exit i3' 'i3-msg exit'"

# resize window (you can also use the mouse for that)
mode "resize" {
# These bindings trigger as soon as you enter the resize mode

# Pressing left will shrink the window’s width.
# Pressing right will grow the window’s width.
# Pressing up will shrink the window’s height.
# Pressing down will grow the window’s height.
    bindsym j resize shrink width 10 px or 10 ppt
        bindsym k resize grow height 10 px or 10 ppt
        bindsym l resize shrink height 10 px or 10 ppt
        bindsym semicolon resize grow width 10 px or 10 ppt

# same bindings, but for the arrow keys
        bindsym Left resize shrink width 10 px or 10 ppt
        bindsym Down resize grow height 10 px or 10 ppt
        bindsym Up resize shrink height 10 px or 10 ppt
        bindsym Right resize grow width 10 px or 10 ppt

# back to normal: Enter or Escape
        bindsym Return mode "default"
        bindsym Escape mode "default"
}

bindsym $mod+r mode "resize"

# Start i3bar to display a workspace bar (plus the system information i3status
# finds out, if available)


# colours				border      bg		  text	    indicator
client.focused 		  	$color12    $BORDERF  $FOCUS    $BORDERF
client.focused_inactive	$color12    $UNFOCUS  $UNFOCUS  $UNFOCUS
client.unfocused		$color4     $BORDERU  $UNFOCUS  $BORDERU
client.urgent			$color5     $FOCUS    $FOCUS    $FOCUS
client.background		$UNFOCUS


#bar {
#    i3bar_command i3bar -t
#    status_command SCRIPT_DIR=/usr/libexec/i3blocks i3blocks
#    position top
#    colors {
#        background #26323888
#        statusline #eceff1ff
#        separator #cfd8dcff
#        # colors           outline  background  number
#        focused_workspace	#f4246bff  $f4246bff    $eceff1ff
#        active_workspace	$37474fff  $37474fff    $81d4faff
#        inactive_workspace	$37474fff  $37474fff    $81d4faff
#        urgent_workspace	#ffc107ff  $ffc107ff    $37474fff
#    }
#}

# BAR
#exec --no-startup-id conky -c ~/.config/conky/blank
#exec --no-startup-id ~/.config/lemon/bar

#DUNST
exec dunst

#AUTOMATIC MOUNTING
exec --no-startup-id devmon --sync --exec-on-drive "notify-send 'Automount' '%l is now mounted at %d.'" --exec-on-remove "notify-send 'Automount' '%l has been removed.'"

#Backlight
bindsym XF86MonBrightnessUp exec --no-startup-id ~/scripts/popup/brightness.sh up
bindsym XF86MonBrightnessDown exec --no-startup-id ~/scripts/popup/brightness.sh down

bindsym XF86AudioLowerVolume exec --no-startup-id ~/scripts/popup/volume.sh down
bindsym XF86AudioRaiseVolume exec --no-startup-id ~/scripts/popup/volume.sh up
bindsym XF86AudioMute exec --no-startup-id ~/scripts/popup/volume.sh mute

bindsym $mod+p exec --no-startup-id ~/scripts/popup/music.sh pause
bindsym XF86AudioPlay exec --no-startup-id ~/scripts/popup/music.sh pause
bindsym $mod+Shift+comma exec --no-startup-id ~/scripts/popup/music.sh prev
bindsym XF86AudioPrev exec --no-startup-id ~/scripts/popup/music.sh prev
bindsym $mod+Shift+period exec --no-startup-id ~/scripts/popup/music.sh next
bindsym XF86AudioNext exec --no-startup-id ~/scripts/popup/music.sh next

bindsym $mod+q exec --no-startup-id ~/scripts/power

#xflux
exec xflux -l 51.5333408

#screenshots
bindsym Print exec --no-startup-id scrot '/home/mbell/Documents/scrots/auto/%Y-%m-%d_%H%M%S_scrot.png' -e 'notify-send "scrot" "Screenshot saved as $n"'
bindsym $mod+Print exec --no-startup-id ~/scripts/scrotsel

exec notify-send -a i3 "loaded" "Welcome to i3."

